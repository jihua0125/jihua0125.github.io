<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>HearthScience</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/bootstrap-theme.min.css" rel="stylesheet">
    <link href="css/scrolling-nav.css" rel="stylesheet">
    <link href="css/bootstrap-slider.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link href='https://fonts.googleapis.com/css?family=Roboto:900,300' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Lobster' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="css/animations.css">
    <link href="css/style.css" rel="stylesheet">


</head>
<body>

<nav class="navbar navbar-collapse navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="nav-header">
            <a class="navbar-brand" href="#intro">
                <h1>HearthScience</h1>
            </a>
        </div>
        <div class="collapse navbar-collapse navbar-right">
            <ul class="nav navbar-nav">
                <li>
                    <a class="page-scroll" href="#story" id="story-btn">Overview</a>
                </li>
                <li>
                    <a class="page-scroll" href="#question" id="question-btn">Questions</a>
                </li>
                <li>
                    <a class="page-scroll" href="#terminology" id="terminology-btn">Terminology</a>
                </li>
                <li>
                    <a class="page-scroll" href="#analysis">Data</a>
                </li>
                <li>
                    <a class="page-scroll" href="#results">Analysis</a>
                </li>
                <li>
                    <a class="page-scroll" href="#video">Video</a>
                </li>
                <li>
                    <a class="page-scroll" href="https://github.com/Yinnanzh/HearthScience">Github</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<section id="intro" class="intro">
    <div class="section-head">
        <div class = "container">
            <div class="container web-title">
                <div class="animatedParent">
                    <h1 id="webpage-title" align="center" class="animated bounceInDown"><span class="span-color1">H</span>earth<span class="span-color2">S</span>cience</h1>
                </div>
                <div class="animatedParent">
                    <h1 id="webpage-subtitle" align="center" class="animated bounceInUp">How to Win <span class="span-color1">HearthStone</span> Using <span class="span-color2">Data Science</span></h1>
                </div>
                <div class="animatedParent">
                    <h2 id="teammates" align="center" class="animated flipInY">
                        <span class="span-color1">Chi-Hsuan</span>  Chang,
                        <span class="span-color2">Ji</span> Hua,
                        <span class="span-color1">Yinnan</span> Zheng,
                        <span class="span-color2">Xue</span> Zou
                    </h2>
                </div>
            </div>
        </div>
    </div>
</section>


<section id="story">
    <div class="section-head">
        <div class = "container">
            <div class="animatedParent">
                <h2 id="title-1" align="left" class="animated fadeInLeft">Overview and Motivation</h2>
                <br>
                <div>
                    <h6>Some of our team members are loyal fans of the popular free online card game, <b>Hearthstone: Heroes of Warcraft</b>, which was released worldwide by Blizzard on 2014 with more than 40 million registered Hearthstone accounts by November 2015. The main element of the game Hearthstone is cards, which consist of a list of features including cost, attack (number of damages can be made to the opponent per turn), health (number of damages that can bear before being destroyed) and other special abilities.
                    </h6>
                    <br>
                    <h6>Before every game starts, each of the two players will choose 1 out of 9 heroes and then select 30 cards over 700 cards to build his/her own deck depending on the mode. Each turn, the player will draw one card randomly from the 30 cards and gain one more mana crystal. The player can choose the cards to use among all those in hand that cost up to the mana crystals he/she has by that turn. The game ends when one player is attacked to death (lose all 30 units of health) or he/she concedes, and the other player will win.
                    </h6>
                    <br>
                    <h6>
                        Therefore, the initial building of the 30 cards, as well as the choices of cards to use during the game will directly influence the results of the game. This motivated us:
                        <br>
                        <br>
                        <div class = "container">
                            <ul>
                                <li class = "objective"><b>To evaluate the value of all cards.</b></li>
                                <li class = "objective"><b>To explore the correlation between cards.</b></li>
                                <li class = "objective"><b>To decide the set of core cards and number of drawing cards.</b></li>
                                <li class = "objective"><b>To explore the number of different costs of card in a deck with simulations.</b></li>
                                <li class = "objective"><b>To build a deck with optimal combined strength.</b></li>
                            </ul>
                        </div>
                    </h6>
                </div>
            </div>
        </div>
    </div>
</section>
<section id="question">
    <div class="section-head">
        <div class = "container">
            <div class="animatedParent">
                <h2 align="left" class="animated fadeInRight">Initial Questions</h2>
                <br>
                <h6>
                    <ol>
                        <div class = "container">
                            <li class = "objective"><b>What are the “true” values of individual cards? Are there any properties the Blizard company used to assign values (cost) of these cards? Is there any card undervalued/overvalued by the company?</b></li>
                            <br>
                            In this stage, we aimed to estimate the value of each card independently, only considering the basic information from the card itself, i.e. attack, health, special ability.
                            <br>
                            <br>
                            <li class = "objective"><b>What is the balance between low cost cards and high cost cards?</b></li>
                            <br>
                            The card a player can use is restricted by the number of mana he/she has for that turn, starting from 1 at the beginning and will reach to a maximum of 10 since the 10th turn. If there is no card with cost less than or equal to the number of mana in that turn, the player cannot use any card. Note that without this consideration, we may choose all 30 cards to be with very high cost – however, we are not able to use them in the first several turns. If the opponent do have small cards, we may be attacked to death before we could ever use any card. We aimed to simulate the possibilities of playing a card in the first 5 turns.
                            <br>
                            <br>
                            <li class = "objective"><b>Are there any “core” combination of cards?</b></li>
                            <br>
                            We aimed to estimate the correlation between cards in certain decks of a specific hero and hope to create card combinations based on principal component analyses. In deciding the number of core cards, we also want to explore the number of drawing cards we need, in order to be able to get the core cards in the random drawing during the game.
                            <br>
                            <br>
                            <li class = "objective"><b>Are we able to build a powerful deck (30 cards) for some heros?</b></li>
                            <br>
                            With all our analysis in previous stages, we aimed to build potentially powerful decks for certain heros.
                            <br>
                            <br>
                            <div align="center"><img src = "img/flowchart.png" height="650"></div>
                            <br>
                            <br>
                            <li class = "objective"><b>Test the deck we built!</b></li>
                            <br>
                            We can test our model by simulating games (or playing real games) using the deck and strategy we developed, and calculate its percentage of winning.
                            <br>
                            <br>
                        </div>
                    </ol>
                </h6>
            </div>
        </div>
    </div>
</section>
<section id="terminology">
        <div class="section-head">
            <div class = "container">
                <div class="animatedParent">
                    <h2 id="title-2" align="left" class="animated fadeInLeft">Terminology of HearthStone</h2>
                    <br>
                </div>

                <h6>
                    <ul>
                        <li><b>Heros:</b> There are 9 heros in Hearthstone, which are shown below.</li>
                        <h6 align="center">From left to right: Druid, Hunter, Mage, Paladin, Priest, Rogue, Shaman, Warlock, Warrior.</h6>
                        <div class="chart-container">
                            <br>
                            <div class="row" align="center">
                                <input type = "image" title="druid" src = "http://hydra-media.cursecdn.com/hearthstone.gamepedia.com/8/8d/Icon_Druid_64.png?version=fff76edc95b3eb9fccf78b2b890f9b59" alt = "Submit">
                                <input type = "image" title="hunter" src = "http://hydra-media.cursecdn.com/hearthstone.gamepedia.com/f/f4/Icon_Hunter_64.png?version=aeb94c1166de9fe57616539b67032518" alt = "Submit">
                                <input type = "image" title="mage" src = "http://hydra-media.cursecdn.com/hearthstone.gamepedia.com/f/f2/Icon_Mage_64.png?version=ed9b91b60da4e0e9832090d1d7836695" alt = "Submit">
                                <input type = "image" title="paladin" src = "http://hydra-media.cursecdn.com/hearthstone.gamepedia.com/7/7b/Icon_Paladin_64.png?version=dd9fc970f5b9652864c1344c003bfcf1" alt = "Submit">
                                <input type = "image" title="priest" src = "http://hydra-media.cursecdn.com/hearthstone.gamepedia.com/2/23/Icon_Priest_64.png?version=280d96814f4596a43818e434ddcb73e1" alt = "Submit">
                                <input type = "image" title="rogue" src = "http://hydra-media.cursecdn.com/hearthstone.gamepedia.com/7/76/Icon_Rogue_64.png?version=87d4b87762790ec6a1d22c26a0227c31" alt = "Submit">
                                <input type = "image" title="shaman" src = "http://hydra-media.cursecdn.com/hearthstone.gamepedia.com/a/a8/Icon_Shaman_64.png?version=53d2ebd46e2e3d985803f09ff5588849" alt = "Submit">
                                <input type = "image" title="warlock" src = "http://hydra-media.cursecdn.com/hearthstone.gamepedia.com/2/2e/Icon_Warlock_64.png?version=4b9e27318bdfe5408427cfd892df0dcc" alt = "Submit">
                                <input type = "image" title="warrior" src = "http://hydra-media.cursecdn.com/hearthstone.gamepedia.com/1/19/Icon_Warrior_64.png?version=736ca379b3e63f0e5d10b3d627b0ae94" alt = "Submit">
                            </div>
                            <br>
                        </div>
                        <li><b>Card:</b> A token that can be played in the game. Here is an example of a card:</li>
                        <div align="center"><img src = "img/card.png" height="400"></div>
                        <li><b>Deck:</b> A combination of 30 cards. A normal card can appear twice in the deck. A legendary card can only appear once.</li>
                        <li><b>Minion:</b> A type of card that can summon a “monster” to fight for you.</li>
                        <li><b>Tempo:</b> Mostly define by the costs of the cards in the deck. The more low-cost cards, the faster the pace/tempo.</li>
                        <li><b>Early Hand:</b> The player who plays first.</li>
                        <li><b>Late Hand:</b> The player who acts later.</li>
                        <br>
                    </ul>
                    And now, let's start a game:
                    <br>
                    <br>
                    <div align="center"><img src = "img/game.jpg" height="650"></div>
                </h6>
            </div>
        </div>
    </section>
</section>
<section id="analysis">
    <div class="section-head">
        <div class = "container">
            <div class="animatedParent">
                <h2 align="left" class="animated fadeInRight">Data</h2>
                <br>
            </div>
            <h3 align="left">Basic Card information</h3>
            <h6>We collected card data from Hearthstone’s API: <a href="http://hearthstoneapi.com">http://hearthstoneapi.com</a>, Card. It contains thorough card information of: card name, card set (Basic, Classic, Blackrock Mountain, Goblins vs Gnomes, Naxxramas, Promotion, The Grand Tournament, The League of Explorers), card type (minions, spells, weapons), player class (Priest, Hunter, Warlock, Shaman, Warrior, Mage, Paladin, Druid, Rogue, All), card description (text), mechanics of minions (Battlecry, Taunt, Normal, HealTarget, Charge, Aura, AdjacentBuff, Spell Damage, Freeze, Enrage, Divine Shield, Stealth, Overload, Deathrattle, Windfury, Combo, Poisonous, Inspire), attack, health, and cost of cards. We have collected the json file using Python and transfer it into RData (and csv files) using R.
            </h6>
            <br>
            <h3 align="left">Frequently used decks from top players</h3>
            <h6> Instead of looking at the card information alone, we are trying to consider how one card interacts with others. We are using the built-up decks from top players of Hearthstone from the following website: <a href="http://www.hearthstonetopdecks.com/">http://www.hearthstonetopdecks.com</a>.
            </h6>
        </div>
        <div class = "container">
            <h3 align="left">Exploratory Analysis</h3>
            <br>
            <h6> First, we want to see how costs of cards distributed across the card databases. A great portion of cards are 2 to 4 cost, which is a right skewed distribution. From the above plots, we have found similar patterns in attack and health as in the cost distribution. These similar patterns give us a hint of using linear model to predict cost by attack and health.</h6>
        <div class = "container-fluid">
            <br>
            <div class="row" align="center">
                <img src = "img/cost_dist.png" width="340">
                <img src = "img/attack_dist.png" width="340">
                <img src = "img/health_dist.png" width="340">
            </div>
            <br>
        </div>
            <h6> In the whole card dataset, there are some confounders such as mechanism, rarity and card set, that might affect our assumption of linear relationship between cost, attack and health. Take mechanism as an example, we ploted the cost, attack and health distributions of under different mechanisms. We found the pattern of these three dimensions are similar across all these mechanisms. For all these three confounders, we found all the distributions have similar patterns.</h6>
            <div class = "container-fluid">
                <br>
                <div class="row" align="center">
                    <img src = "img/mechanic1.png" width="340">
                    <img src = "img/mechanic2.png" width="340">
                    <img src = "img/mechanic3.png" width="340">
                </div>
            </div>
            <h6> Also, we can take a look at the distribution of cards in different cardsets.</h6>
            <br>
            <div class = "container-fluid">
                <div class="row">
                    <div align="center"><img src = "img/by_cardset1.png" height="400"></div>
                </div>
            </div>
        </div>
    </div>
</section>
<section id="results">
    <div class="section-head">
        <div class = "container">
            <div class="animatedParent">
                <h2 align="left" class="animated fadeInLeft">Analysis</h2>
                <br>
            </div>

            <h3 align="left">Card Value Analysis</h3>
            <h6>All the analysis on card values were only done on minions (cards that have attack and health). Recalling our plots from in <b>Exploratory Analysis</b>, as well as plotting another histogram for the sum of health and attack (attack+health), we can found similar distributions between the cost and the sum of attach and health, where the distributions are right-skewed.</h6>
            <br>
            <div align="center"><img src = "img/card_value1.png" height="400" width="800"></div>
            <br>
            <h6>Since cards with extreme values (costs greater than 10 and zero cost cards) are generally different with cards between 1 to 10, we exclude those cards in our analysis. Also, in Hearthstone, the cost of cards is usually categorized into 0 ~ 6 and 7+. We therefore wrangled the card costs into these 8 categories: </h6>
            <br>
            <div align="center"><img src = "img/card_value2.png" height="400" width="900"></div>
            <br>
            <h6>We can see from the above graphs that higher value of <b>attack+health</b> is associated with higher mean cost. Here, the left graph shows the relationship between the sum of health and attack (attack+health) and the cost; the right graph shows the relationship between the sum of health and attack (attack+health) and the cost categories (0 - 7+).</h6>

            <h6>Since the outcome variable (Y) in our analysis is the costs of cards, which are normally integer from 0 to 7+ (all values greater than 7 are considered in the group of 7+), we adopted a model that consider ordinal polytomous outcome – cumulative logits model. Since the features’ effects (attack, cost, special abilities, etc.) should be the similar in cards with different costs, we also assumed proportional odds of these features across different cost groups. And we ended up with 7 outcome groups (cost value: 1 to 7+), we excluded cards that cost 0 mana since 1) they are usually cards that do not cost players to play and 2) the nature of these 0 cost cards are quite different from normal minion cards. In general, the cumulative logits model is in format shown below, where X is the covariate matrix, and ββ is the coefficient matrix:</h6>
            <br>
            <nobr aria-hidden="true"><span class="math" id="MathJax-Span-4" role="math" style="width: 21.015em; display: inline-block;">
                <span style="display: inline-block; position: relative; width: 17.503em; height: 0px; font-size: 120%;">
                    <span style="position: absolute; clip: rect(1.848em 1017.5em 3.634em -999.997em); top: -2.973em; left: 0.003em;">
                        <span class="mrow" id="MathJax-Span-5">
                            <span class="mstyle" id="MathJax-Span-6">
                                <span class="mrow" id="MathJax-Span-7">
                                    <span class="mtext" id="MathJax-Span-8" style="font-family: STIXGeneral-Regular;">logit(Pr</span></span>
                            </span>
                            <span class="texatom" id="MathJax-Span-9">
                                <span class="mrow" id="MathJax-Span-10">
                                    <span class="mo" id="MathJax-Span-11" style="font-family: STIXGeneral-Regular;">(</span>
                                    <span class="mi" id="MathJax-Span-12" style="font-family: STIXGeneral-Italic;">Y
                                        <span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span>
                                    </span>
                                    <span class="mo" id="MathJax-Span-13" style="font-family: STIXGeneral-Regular; padding-left: 0.301em;">≤</span>
                                    <span class="mi" id="MathJax-Span-14" style="font-family: STIXGeneral-Italic; padding-left: 0.301em;">k
                                        <span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span>
                                    </span>
                                    <span class="texatom" id="MathJax-Span-15">
                                        <span class="mrow" id="MathJax-Span-16">
                                            <span class="mo" id="MathJax-Span-17" style="font-family: STIXGeneral-Regular;">|</span>
                                        </span>
                                    </span>
                                    <span class="msubsup" id="MathJax-Span-18">
                                        <span style="display: inline-block; position: relative; width: 0.896em; height: 0px;">
                                            <span style="position: absolute; clip: rect(3.158em 1000.66em 4.17em -999.997em); top: -3.985em; left: 0.003em;">
                                                <span class="mi" id="MathJax-Span-19" style="font-family: STIXGeneral-Italic;">X
                                                    <span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span>
                                                </span><span style="display: inline-block; width: 0px; height: 3.991em;"></span>
                                            </span>
                                            <span style="position: absolute; top: -3.807em; left: 0.598em;">
                                                <span class="mi" id="MathJax-Span-20" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span>
                                                <span style="display: inline-block; width: 0px; height: 3.991em;"></span>
                                            </span>
                                        </span>
                                    </span>
                                    <span class="mo" id="MathJax-Span-21" style="font-family: STIXGeneral-Regular; padding-left: 0.301em;">=</span>
                                    <span class="msubsup" id="MathJax-Span-22" style="padding-left: 0.301em;">
                                        <span style="display: inline-block; position: relative; width: 0.717em; height: 0px;">
                                            <span style="position: absolute; clip: rect(3.396em 1000.48em 4.17em -999.997em); top: -3.985em; left: 0.003em;">
                                                <span class="mi" id="MathJax-Span-23" style="font-family: STIXGeneral-Italic;">x
                                                    <span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span>
                                                </span>
                                                <span style="display: inline-block; width: 0px; height: 3.991em;"></span>
                                            </span>
                                            <span style="position: absolute; top: -3.807em; left: 0.42em;">
                                                <span class="mi" id="MathJax-Span-24" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span>
                                                <span style="display: inline-block; width: 0px; height: 3.991em;"></span>
                                            </span>
                                        </span>
                                    </span>
                                    <span class="mo" id="MathJax-Span-25" style="font-family: STIXGeneral-Regular;">)</span>
                                    <span class="mo" id="MathJax-Span-26" style="font-family: STIXGeneral-Regular;">)</span>
                                </span>
                            </span>
                            <span class="mo" id="MathJax-Span-27" style="font-family: STIXGeneral-Regular; padding-left: 0.301em;">=</span>
                            <span class="msubsup" id="MathJax-Span-28" style="padding-left: 0.301em;">
                                <span style="display: inline-block; position: relative; width: 1.253em; height: 0px;">
                                    <span style="position: absolute; clip: rect(3.158em 1000.54em 4.348em -999.997em); top: -3.985em; left: 0.003em;">
                                        <span class="mi" id="MathJax-Span-29" style="font-family: STIXGeneral-Italic;">β
                                            <span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span>
                                        </span>
                                        <span style="display: inline-block; width: 0px; height: 3.991em;"></span>
                                    </span>
                                    <span style="position: absolute; top: -3.807em; left: 0.539em;">
                                        <span class="texatom" id="MathJax-Span-30">
                                            <span class="mrow" id="MathJax-Span-31">
                                                <span class="mi" id="MathJax-Span-32" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">k
                                                    <span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span>
                                                </span>
                                                <span class="mn" id="MathJax-Span-33" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">0</span>
                                            </span>
                                        </span>
                                        <span style="display: inline-block; width: 0px; height: 3.991em;"></span>
                                    </span>
                                </span>
                            </span>
                            <span class="mo" id="MathJax-Span-34" style="font-family: STIXGeneral-Regular; padding-left: 0.241em;">+</span>
                            <span class="mo" id="MathJax-Span-35" style="font-family: STImdizeOneSym; vertical-align: -0.533em; padding-left: 0.241em;">∑</span>
                            <span class="msubsup" id="MathJax-Span-36" style="padding-left: 0.182em;">
                                <span style="display: inline-block; position: relative; width: 1.134em; height: 0px;">
                                    <span style="position: absolute; clip: rect(3.158em 1000.54em 4.348em -999.997em); top: -3.985em; left: 0.003em;">
                                        <span class="mi" id="MathJax-Span-37" style="font-family: STIXGeneral-Italic;">β
                                            <span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span>
                                        </span>
                                        <span style="display: inline-block; width: 0px; height: 3.991em;"></span>
                                    </span>
                                    <span style="position: absolute; top: -3.807em; left: 0.539em;">
                                        <span class="texatom" id="MathJax-Span-38">
                                            <span class="mrow" id="MathJax-Span-39">
                                                <span class="mi" id="MathJax-Span-40" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">k
                                                    <span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span>
                                                </span>
                                                <span class="mi" id="MathJax-Span-41" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span>
                                            </span>
                                        </span>
                                        <span style="display: inline-block; width: 0px; height: 3.991em;"></span>
                                    </span>
                                </span>
                            </span>
                            <span class="mo" id="MathJax-Span-42" style="font-family: STIXGeneral-Regular; padding-left: 0.241em;">∗</span>
                            <span class="msubsup" id="MathJax-Span-43" style="padding-left: 0.241em;">
                                <span style="display: inline-block; position: relative; width: 0.717em; height: 0px;">
                                    <span style="position: absolute; clip: rect(3.396em 1000.48em 4.17em -999.997em); top: -3.985em; left: 0.003em;">
                                        <span class="mi" id="MathJax-Span-44" style="font-family: STIXGeneral-Italic;">x
                                            <span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span>
                                        </span>
                                        <span style="display: inline-block; width: 0px; height: 3.991em;"></span>
                                    </span>
                                    <span style="position: absolute; top: -3.807em; left: 0.42em;">
                                        <span class="mi" id="MathJax-Span-45" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span>
                                        <span style="display: inline-block; width: 0px; height: 3.991em;"></span>
                                    </span>
                                </span>
                            </span>
                        </span>
                        <span style="display: inline-block; width: 0px; height: 2.979em;"></span>
                    </span>
                </span>
                <span style="display: inline-block; overflow: hidden; vertical-align: -0.639em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.861em;"></span>
            </span>
            </nobr>
            <br>
            <h6>Using this cumulative logits model, we are able to estimate the probability of a card being classified in each cost group (p1 to p7), and then by conditioning on the features of a card, we are able to assign a value of that card with the maximum probability among p1 to p7 (the most likely cost of a card based on its features).</h6>
            <h6>Since one of our assumption that the cost of a card is proportional to the damage it can lead to, we considered several models: <b>1)</b> a univariate model which includes attack as the only covariate,
                <b>2)</b> a univariate model which includes attack+health as the only covariate,
                <b>3)</b> a model includes attack and health as two covariates,
                <b>4)</b> a model as <b>3)</b> with additional consideration of mechanics.</h6>
            <h6>In model <b>4)</b>, since Hearthstone cards have descriptions on them and they are sometimes not quantifiable,
                we distinguished features that are easily quantifiable into categories. We ended up categorizing cards into Charge (cards can attack immediately once they were put on the stage), Divine Shield (cards have a protective shield that can protect them from reducing health during their first attack), Overload (specific cards for Shamman that can cause dramatic decrease in health at very early stage, but playing overload cards we limit the amount of mana players can use in the next round), Taunt (cards that can protect the hero, the opponent must attack taunts first before attacking the hero), Stealth (cards that are invisible and can not be attacked until their first attack), and Windfury (cards that can attack twice each turn). Cards that cannot be classified into these categories was then treated as normal cards and set to be reference group in the model.</h6>
            <h6>We checked our model fitting in our 10% testing set based on RMSE and also check the significance of covariates in every model. We ended up with a model containing <b>attack, health, charge, and overload </b>.
                And, we fit the whole dataset (all minion cards valued 1 to 7+) with this model. The model will give us prediction of the probabilities that a card's value is in each of these 1, 2, .. 6, or 7+ categories, based on its  <b>attack, health, charge, and overload </b>,
                where charge and overload are features that are set to be binary (1: with such feature; 0: without such feature). And we chose the maximum probability among p1 (probability that this card is a one cost card) to p7+ (probability that this card is a 7+ cost card).</h6>
            <h6>The residue between our predicted value and the assigned value is defined as <b>resid</b>, and we then plotted out all cards that are either under- or over-valued.</h6>
            <br>
            <div align="center"><img src = "img/card_value3.png" height="600"></div>
            <br>
            <h6>
                From the above plot, we can see that after adjusting for the claimed features (health, attack, charge, overload) of cards, some of the cards were overvalued (resid = estimated cost - assigned < 0) and some of them were undervalued (resid > 0). Cards that are Battlecry (cards that launch certain descriptive effects when cards are played), Normal (cards that do not have any special effects), and Deathrattle (cards that launch certain descriptive effects when cards are dead) are more frequently over- or under-valued.
            </h6>
            <br>
            <h3 align="left">Simulation</h3>
            <h6>According to our previous model and our exprience with HearthStone, the higher the cost of a card, the more powerful it is. However, the higher the cost of a card, the less likely we can play in the first few rounds (due to limited mana in hand). Especially when we decide to play fast tempo, we want to be able to attack the opponent before he collects his good cards or core cards.
                Therefore, we intended to reach a balance on choosing low/high cost cards.</h6>
            <h6>To simulate this, we made the following assumptions:
                <ul>
                    <li><b>Assumption 1:</b> Players will not play zero cost cards in the first few rounds.</li>
                    <li><b>Assumption 2:</b> Cost can roughly represent the value of the card, thus we can maximize the cost of all 30 cards to maximize their values.</li>
                    <li><b>Assumption 3:</b> We focus on the first 5 turns, since the card costs are mostly less than 6 (76.3% of cards).</li>
                </ul> </h6>
            <h6>First, create decks with all reasonable combinations of small cards (cost 1-5) and others. </h6>
            <h6>Next, use simulation to estimate the probability to use card in the first 1/2/3/4/5-turn for each deck. Estimations are made for offensive player, as the defensive player has higher possibility to use cards (4 cards at the begining with a special 0 cost card that temporatily increases the mana by 1) for the first few turns.</h6>
            <h6>Finally, we decide the minimum number of low cost cards, depending on each play tempo. We decide this by making different thresholds of the probability of using cards by the second/third/fourth turn.</h6>
            <table class="table table-bordered table-hover table-condensed">
                <thead><tr id = "tempo"><td>Tempo</td>
                    <td># <2 mana</td>
                    <td># <3 mana</td>
                    <td># <4 mana</td>
                </tr></thead>
                <tbody>
                <tr><td>Fast</td>
                    <td>7</td>
                    <td>-</td>
                    <td>9</td>
                </tr>
                <tr><td>Mid-range</td>
                    <td>5</td>
                    <td>6</td>
                    <td>7</td>
                </tr>
                <tr><td>Slow</td>
                    <td>2</td>
                    <td>5</td>
                    <td>7</td>
                </tr>
                </tbody>
            </table>
            <h6>The simulation results shows the number of low-cost cards required in all situations of different play mode (slow, mid and fast-tempo).</h6>
            <h6>In fast-tempo play mode, we need at least 7 cards with cost no more than 2, at least 9 cards with cost no more than 4.</h6>
            <h6>In mid-tempo play mode, we need at least 5 cards with cost no more than 5, at least 6 cards with cost no more than 3, and at least 7 cards with cost no more than 4.</h6>
            <h6>In slow-tempo play mode, we need at least 2 cards with cost no more than 2, at least 5 cards with cost no more than 3, and at least 7 cards with cost no more than 4.</h6>
            <br>
            <h3 align="left">Deck Analysis</h3>
            <h4 align="left">Look into the deck-specific features</h4>
            <h6>From our empirical knowledge, we know that each deck has its own strategy to win the game, depending on the hero mode and the play tempo (fast/slow). The strategies include aggro, control, midrange, face, etc. These strategies are highly related to the average cost of all the minions inside the deck.</h6>
            <br>
            <div align="center"><img src = "img/deck_dist.png" height="650"></div>
            <br>
            <h6>From the histogram we can see warlock is quite different from other heros, the distribution of the costs of decks has double peaks, while others are more likely following a normal distribution. This finding suggests that the warlock card may be ideal to look at as it is likely to have both slow-tempo and fast-tempo mode to play, and may have distinctive features and combinations for certain cards.</h6>
            <br>
            <h4 align="left">Explore Card Interactions within Warlock Decks</h4>
            <h6>We have looked at the correlation between the cards within warlock decks. We calculated the correlations between each cards.</h6>
            <br>
            <div align="center"><img src = "img/deck_cluster1.png" height="600"></div>
            <br>
            <div align="center"><img src = "img/deck_cluster2.png" height="400"></div>
            <br>
            <h6>From the principle components analysis, we can see the top 2 principle components have explained 2/3 of the variance between cards and the top 9 can explain 91% of the variance. So here, we are going to use the first 9 principle components to do the following analysis to keep the scale of problem acceptable and avoid overfitting.</h6>
            <br>
            <div align="center"><img src = "img/deck_cluster3.png" height="500"></div>
            <br>
            <br>
            <div align="center"><img src = "img/deck_cluster4.png" height="500"></div>
            <br>
            <br>
            <div align="center"><img src = "img/deck_cluster5.png" height="500"></div>
            <br>
            <h4 align="left">Clustering of cards</h4>
            <h6>In the above, we have tried to use Kmeans clustering to distinguish different type of decks. By the FOM plots, we found that 4 is the balanced point, so we made a 4 centroid clustering. We randomly pick one deck to see if the clusters make sense. We can see in the following table that most of the cards fall into the same clusters.</h6>
            <br>
            <div align="center"><img src = "img/deck_cluster6.png" height="600"></div>
            <br>
            <h6>Also, we made the following correlation heatmap to see the correlations inside the clusters.</h6>
            <br>
            <div align="center"><img src = "img/deck_cluster7.png" height="600"></div>
            <br>
            <div align="center"><img src = "img/deck_cluster8.png" height="600"></div>
            <br>
            <div align="center"><img src = "img/deck_cluster9.png" height="600"></div>
            <br>
            <div align="center"><img src = "img/deck_cluster10.png" height="600"></div>
            <br>
            <h6>Let’s look at the card frequency distribution.</h6>
            <br>
            <div align="center"><img src = "img/deck_cluster11.png" height="600"></div>
            <br>
            <h6>From the above plots, we can see that the cards in cluster 1 and 3 appear more frequently in decks. This helps us to select the core cards of a deck. A core card should neither appear too much, which makes it look like panacea; nor appear too little, which means it has fewer interaction with other cards.</h6>
            <h6>Now, in each cluster, we have several numbers of core cards. 6 and 7 core cards may be too much and we are worried that we may not be able to get all the core cards and to use them. So we decide to do a simulation to figure out how the numbers of core cards will affect the probability of getting all the core cards after each turn.</h6>
            <br>
            <h4 align="left">Number of Core cards</h4>
            <h6>For each deck, there are several “core” cards that can have the greatest effect when they are used together. We will usually put 2 cards for each component of core cards, Once we get at least one of every component in a set of core cards, we are very likely to win – but we need to survive to that time. Thus we hope to get at least one for every component as early as possible.</h6>
            <h6>First we list all possible decks with core cards and all other cards (normal cards). Each set of core cards includes 2-5 different components. We consider the offensive side/early hand first.</h6>
            <h6>Similarly we can estimate the probability for the defensive side/late hand.</h6>
            <h6>The probability of getting the whole set of core cards increases by the number of cards you draw, and also differs from the number of core card in a set and from the early or late hand.</h6>
            <br>
            <div align="center"><img src = "img/early_hand1.png" height="600"></div>
            <br>
            <div align="center"><img src = "img/early_hand2.png" height="600"></div>
            <br>
            <h6>After we selected the candidates of core cards, now we are trying to construct a deck from what we have.</h6>
            <h6>According to our simulations above, we set a vertical line at Turn 10. At that point the curves of probablity of collecting all k (k=2,3,4…) core cards are seperate. Considering Warlock’s hero ability (draw one card by 2 self-damages), at Turn 10, the total cards the player might draw are from 13 to 18 for early hand and 14 to 19 for late hand. We assume that the core cards are determinant to winning a game, which means that if the player collect all these cards, he will win. We set the cutoffs as 0.5, which means half of the games can collect all these core cards. We can see that 5 is the maxium number of core cards that satisifies our criteria.</h6>
            <h6>To reduce number of core cards, we used the evaluation of step 1. Here, we used the cards that are underestimated most as our core cards from the candidates. Then we calculated the distance of other cards to the center of these cards and pick the nearest cards to construct our deck.</h6>
            <h6>And, here is the deck we constructed finally:</h6>
            <br>
            <div class="row" align="center">
                <input type = "image" src = "http://wow.zamimg.com/images/hearthstone/cards/enus/original/CS2_065.png" alt = "Submit" height = 250>
                <input type = "image" src = "http://wow.zamimg.com/images/hearthstone/cards/enus/original/EX1_319.png" alt = "Submit" height = 250>
                <input type = "image" src = "http://wow.zamimg.com/images/hearthstone/cards/enus/original/EX1_316.png" alt = "Submit" height = 250>
                <input type = "image" src = "http://wow.zamimg.com/images/hearthstone/cards/enus/original/EX1_008.png" alt = "Submit" height = 250>
                <input type = "image" src = "http://wow.zamimg.com/images/hearthstone/cards/enus/original/EX1_011.png" alt = "Submit" height = 250>
                <input type = "image" src = "http://wow.zamimg.com/images/hearthstone/cards/enus/original/NEW1_019.png" alt = "Submit" height = 250>
                <input type = "image" src = "http://wow.zamimg.com/images/hearthstone/cards/enus/original/FP1_007.png" alt = "Submit" height = 250>
                <input type = "image" src = "http://wow.zamimg.com/images/hearthstone/cards/enus/original/EX1_162.png" alt = "Submit" height = 250>
                <input type = "image" src = "http://wow.zamimg.com/images/hearthstone/cards/enus/original/LOE_007.png" alt = "Submit" height = 250>
                <input type = "image" src = "http://wow.zamimg.com/images/hearthstone/cards/enus/original/EX1_304.png" alt = "Submit" height = 250>
                <input type = "image" src = "http://wow.zamimg.com/images/hearthstone/cards/enus/original/EX1_046.png" alt = "Submit" height = 250>
                <input type = "image" src = "http://wow.zamimg.com/images/hearthstone/cards/enus/original/EX1_310.png" alt = "Submit" height = 250>
                <input type = "image" src = "http://wow.zamimg.com/images/hearthstone/cards/enus/original/EX1_320.png" alt = "Submit" height = 250>
                <input type = "image" src = "http://wow.zamimg.com/images/hearthstone/cards/enus/original/EX1_586.png" alt = "Submit" height = 250>
            </div>
            <div class = "row" align="center">
                <input type = "image" src = "http://wow.zamimg.com/images/hearthstone/cards/enus/original/EX1_116.png" alt = "Submit" height = 250>
                <input type = "image" src = "http://wow.zamimg.com/images/hearthstone/cards/enus/original/EX1_556.png" alt = "Submit" height = 250>
            </div>
            <br>
            <h6>In this deck we built, we have 8 cards with cost 1, 6 cards with cost 2, 3 cards with cost 3, 2 cards with cost 4. It satisfy our simulation of fast-tempo play mode in which we need at least 7 cards with cost no more than 2, at least 9 cards with cost no more than 4. Thus we are supposed to be able to play the cards randomly drawn from the deck with high probabilities (at least 90% probability in the first 2 turns, 95% probability in the first 3 turns, and 99% probability in the first 4 turns).</h6>
            <br>
            <h3 align="left">Validation</h3>
            <h4 align="left">Card Value Model Validation: Blizard’s adjustment of card values</h4>
            <h6>Blzzard has recently (four days ago) released an expansion package, which includes a series of new cards. However, the inforamtion of these cards have not been released by Blizard’s API. Fortunately, they also adjusted 12 existing cards (7 of them are minions), which allowed us to validate our model.</h6>
            <br>
            <div class="row" id="validation-cards-div">
                <input type = "image" src = "http://wow.zamimg.com/images/hearthstone/cards/enus/original/EX1_029.png" alt = "Submit" height = 250>
                <input type = "image" src = "http://wow.zamimg.com/images/hearthstone/cards/enus/original/NEW1_019.png" alt = "Submit" height = 250>
                <input type = "image" src = "http://wow.zamimg.com/images/hearthstone/cards/enus/original/CS2_203.png" alt = "Submit" height = 250>
                <input type = "image" src = "http://wow.zamimg.com/images/hearthstone/cards/enus/original/EX1_089.png" alt = "Submit" height = 250>
                <input type = "image" src = "http://wow.zamimg.com/images/hearthstone/cards/enus/original/EX1_166.png" alt = "Submit" height = 250>
                <input type = "image" src = "http://wow.zamimg.com/images/hearthstone/cards/enus/original/NEW1_008.png" alt = "Submit" height = 250>
                <input type = "image" src = "http://wow.zamimg.com/images/hearthstone/cards/enus/original/EX1_620.png" alt = "Submit" height = 250>
            </div>
            <br>
            <h6>
                Our model predicted 3 out of these 7 cards correctly, in which they are underestimate (they are more powerful than the values they were assigned). After Blizard’s adjustment, these cards become weakened. However, we also made wrong prediction on three cards: Ironbeak Owl, Keeper of Grove and Ancient of Lore. The first two cards have special ability with silence effect, which is not adjusted into our model since there are only three cards with this ability. The Ancient of Lore is also misvalued by our model, this is because it has the ability of Choice, and Choice is also a uncommon ability so it has too few cards for our model to predict. Also, in our model, we consider all the cards with more than 7 costs as 7 cost (be consistent with the categories in HearthStone game). So for Molten Giant, it has a special mechanism of changing costs according to the hero’s health, which makes it have a changeable cost. This is not suitable for our model (we can only estimate minions with a fixed cost).
            </h6>
            <br>
            <h4 align="left">Real-time evaluation of zooDeck:
            </h4>
            <h6>After we built this deck, we tried to fight against AI first. The results are showed below. Generally speaking, our established deck performed pretty well in players vs. computer games.</h6>
            <br>
            <table class="table table-bordered table-hover table-condensed">
                <thead><tr id = "colname"><td>Match</td>
                    <td>Hero</td>
                    <td>Hand</td>
                    <td>Result</td>
                    <td>Cost</td>
                </tr></thead>
                <tbody>
                <tr><td>1</td>
                    <td>Warlock</td>
                    <td>early</td>
                    <td>W</td>
                    <td>8</td>
                </tr>
                <tr><td>2</td>
                    <td>Warlock</td>
                    <td>early</td>
                    <td>W</td>
                    <td>9</td>
                </tr>
                <tr><td>3</td>
                    <td>Mage</td>
                    <td>late</td>
                    <td>W</td>
                    <td>7</td>
                </tr>
                <tr><td>4</td>
                    <td>Mage</td>
                    <td>early</td>
                    <td>W</td>
                    <td>7</td>
                </tr>
                <tr><td>5</td>
                    <td>Hunter</td>
                    <td>late</td>
                    <td>W</td>
                    <td>7</td>
                </tr>
                <tr><td>6</td>
                    <td>Hunter</td>
                    <td>early</td>
                    <td>W</td>
                    <td>7</td>
                </tr>
                <tr><td>7</td>
                    <td>Warrior</td>
                    <td>early</td>
                    <td>W</td>
                    <td>7</td>
                </tr>
                <tr><td>8</td>
                    <td>Warrior</td>
                    <td>late</td>
                    <td>W</td>
                    <td>8</td>
                </tr>
                <tr><td>9</td>
                    <td>Shaman</td>
                    <td>late</td>
                    <td>W</td>
                    <td>9</td>
                </tr>
                <tr><td>10</td>
                    <td>Shaman</td>
                    <td>late</td>
                    <td>L</td>
                    <td>8</td>
                </tr>
                <tr><td>11</td>
                    <td>Druid</td>
                    <td>late</td>
                    <td>W</td>
                    <td>6</td>
                </tr>
                <tr><td>12</td>
                    <td>Druid</td>
                    <td>late</td>
                    <td>W</td>
                    <td>6</td>
                </tr>
                <tr><td>13</td>
                    <td>Priest</td>
                    <td>early</td>
                    <td>W</td>
                    <td>8</td>
                </tr>
                <tr><td>14</td>
                    <td>Priest</td>
                    <td>late</td>
                    <td>W</td>
                    <td>8</td>
                </tr>
                <tr><td>15</td>
                    <td>Rogue</td>
                    <td>early</td>
                    <td>W</td>
                    <td>7</td>
                </tr>
                <tr><td>16</td>
                    <td>Rogue</td>
                    <td>early</td>
                    <td>W</td>
                    <td>8</td>
                </tr>
                <tr><td>17</td>
                    <td>Paladin</td>
                    <td>late</td>
                    <td>W</td>
                    <td>6</td>
                </tr>
                <tr><td>18</td>
                    <td>Paladin</td>
                    <td>early</td>
                    <td>L</td>
                    <td>8</td>
                </tr>
                </tbody></table>
            <br>
            <h6>After we played agint AI, we want to see the deck’s performance in real games (Player vs. Player). We asked three different players to play with this deck for 5 games and record the results. The final results are showed below. The average winning rate is 53.3%. As we are only constructing the deck but not considering the strategy of using the cards during the game, we do not expect to get a very high wining rate. However, a wining rate around 50% means that our model based on mostly data science can potentially pick a average level deck for you, which can be particularly useful for new players without prior knowledge and personal preference.</h6>
            <br>
            <table class="table table-bordered table-hover table-condensed">
                <thead><tr id = colname1><td>Match</td>
                    <td>Player1</td>
                    <td>Player2</td>
                    <td>Player3</td>
                </tr></thead>
                <tbody><tr><td>Match 1</td>
                    <td>W</td>
                    <td>W</td>
                    <td>W</td>
                </tr>
                <tr><td>Match 2</td>
                    <td>W</td>
                    <td>L</td>
                    <td>W</td>
                </tr>
                <tr><td>Match 3</td>
                    <td>W</td>
                    <td>W</td>
                    <td>L</td>
                </tr>
                <tr><td>Match 4</td>
                    <td>L</td>
                    <td>L</td>
                    <td>L</td>
                </tr>
                <tr><td>Match 5</td>
                    <td>L</td>
                    <td>L</td>
                    <td>W</td>
                </tr>
                </tbody></table>
            <br>
            <h6><b>Special Thanks:</b>Thanks to Ji’s friends Chengqi and Chenchao for their help in testing our deck in real games!</h6>
        </div>
    </div>

</section>
<section id="video">
    <div class="section-head">
        <div class = "container">
            <div class="animatedParent">
                <h2 align="left" class="animated fadeInRight">Video</h2>
            </div>

            <iframe width="800" height="500" src="https://www.youtube.com/embed/ISpJ_VvB8PQ" frameborder="0" allowfullscreen></iframe>
            <br>
        </div>
    </div>
</section>
<br>
<br>
<br>
<div class="border row">
</div>


<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="js/bootstrap.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/jquery.easing.min.js"></script>
<script src="js/scrolling-nav.js"></script>
<script src="js/css3-animate-it.js"></script>
<script src="js/main.js"></script>
</body>
</html>